<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/style.css">
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
        <script src="https://use.fontawesome.com/f300c85415.js"></script>
    </head>
    <body>
        <header></header>
        <nav class="drawer" data-bind="css:{'drawer--open': showDrawer()}">
            <i class="fa fa-bars" aria-hidden="true" data-bind="click: toggleShowDrawer"></i>
            <button class="drawer__create-location-btn" data-bind="click: toggleCreatingPlace, css:{'drawer__create-location-btn--closed': !$root.creatingPlace(), 'drawer__create-location-btn--open': $root.creatingPlace()}">Add Location</button>
            <form class="create-location-form drawer__create-location-form" data-bind="submit: $root.addLocation, visible: $root.creatingPlace(), with: $root.newPlace">
                <input class="create-location-form__name" placeholder="Name" data-bind="textInput: name"></input>
                <textarea class="create-location-form__info" placeholder="Write down some information about your session at this spot" data-bind="textInput: info"></textarea>
                <button type="submit" class="create-location-form__submit">Pin to center</button>
            </form>
            <input placeholder="Search for a place" data-bind="value: filterValue, valueUpdate: 'afterkeydown'"></input>
            <ul data-bind="foreach: places" class="drawer__list">
                <li data-bind="text: name(), visible: visible(), click: $root.chooseListItem"></li>
            </ul>
        </nav>
        <div id="map"></div>
        <!--<button id="create-location" data-bind="click: createLocation" >Add Location</button>-->
        <!--<button id="export-locations" data-bind="click: exportLocations" >Export locations</button>-->
        </div>
        <div  class="large-info-window" data-bind="with: selectedPlace(), css:{'large-info-window--open': $root.showLargeInfoWindow()}">
            <span class="large-info-window__toggle" data-bind="click: $root.toggleShowLargeInfoWindow">More Info</span>
            <label class="large-info-window__name" data-bind='text: name, visible: !editing(),event: { dblclick: $root.setEditing }, doubleTap: $root.setEditing'></label> 
            <input class='large-info-window__name--edit' data-bind="value: name, visible: editing,  valueUpdate: 'afterkeydown', enterKey: $root.saveEditing, escapeKey: $root.undoEditing"></input>
            <label class="large-info-window__latlng">lat: <span data-bind='text: latlng().lat'></span></label> 
            <label class="large-info-window__latlng">lng: <span data-bind='text: latlng().lng'></span> </label>
            <label class="large-info-window__info" data-bind='text: info, visible: !editing(),event: { dblclick: $root.setEditing }, doubleTap: $root.setEditing'></label> 
            <input class='large-info-window__info--edit' data-bind="value: info, visible: editing,  valueUpdate: 'afterkeydown', enterKey: $root.saveEditing, escapeKey: $root.undoEditing"></input>
        </div>
        <script type="text/template" id="info-window-template">
            "<h2 data-bind='text: name'></h2>"+
            "lat: " + "<span data-bind='text: latlng().lat'></span>"+
            "lng: " + "<span data-bind='text: latlng().lng'></span>"
        </script>
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.12.0.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="bower_components/knockout/dist/knockout.js"></script>
        <script src="js/session-places.js"></script>
        <script src="js/keyhandling.js"></script>
        <script src="js/doubletap.js"></script>
        <script src="js/console-save.js"></script>
        <script src="js/main.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDatOjMfgbYIs1bJy8oF90D-fmjZF-jIVQ&callback=initMap"
        async defer></script>
    </body>
</html>
